{% extends 'base.html.twig' %}

{% set titleClass = 'text-4xl md:text-6xl font-bold text-primary' %}
{% set subtitleClass = 'text-xl text-primary/80' %}
{% set animationDuration = 500 %}
{% set animationDelay = 200 %}
{% set animationFactor = 2 %}
{% set animationEasing = 'ease-in-out' %}

{% form_theme contactForm _self %}
{% block form_errors %}
    {% if errors|length > 0 %}
        <ul class="mt-1 text-sm text-red-600 list-none">
            {% for message in errors|map(e => e.message) %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
{% block form_row %}
    {% set widget_attr = {} %}
    {% if help is not empty %}
        {% set widget_attr = {attr: {'aria-describedby': id ~ '_help'}} %}
    {% endif %}
    <div{% if form.vars.row_attr %}{% with {attr: form.vars.row_attr} %}{{ block('attributes') }}{% endwith %}{% endif %}>
        {{ form_label(form) }}
        {{ form_widget(form, widget_attr) }}
        {{ form_errors(form) }}
        {{ form_help(form) }}
    </div>
{% endblock %}

{% block body %}
    <section id="hero" class="relative h-dvh flex items-center justify-center bg-cover bg-center bg-slate-50 py-20" style="background-image: url('{{ hero.image }}');">
        <div class="relative z-10 text-center px-6 max-w-4xl">
            <h1 class="text-5xl md:text-7xl font-bold text-slate-50 text-shadow-md text-shadow-black/10 mb-6" data-aos="fade-up" data-aos-duration="{{ animationDuration }}">{{ hero.title }}</h1>
            <p class="text-xl text-slate-100 text-shadow-md text-shadow-black/10" data-aos="fade-in" data-aos-delay="{{ animationDelay }}" data-aos-duration="{{ animationDuration }}">{{ hero.description }}</p>
        </div>
        <div class="absolute bottom-0 left-0 right-0 h-full w-full bg-primary/40 vignette"></div>
    </section>

    <section id="why" class="bg-slate-100 dots-pattern py-32 lg:pb-0!">
        <div class="container mx-auto grid lg:grid-cols-2">
            <div class="ps-6">
                <div class="space-y-3">
                    <h2 class="{{ titleClass }}" data-aos="fade-up" data-aos-duration="{{ animationDuration }}">{{ why.title }}</h2>
                    <p class="{{ subtitleClass }}" data-aos="fade-in" data-aos-delay="{{ animationDelay }}" data-aos-duration="{{ animationDuration }}">{{ why.subtitle }}</p>
                </div>
                <div class="space-y-8 pt-8 pb-32">
                    {% for item in why.items %}
                        <div class="flex gap-4 items-center" data-aos="fade-in" data-aos-delay="{{ loop.index * (animationDelay / animationFactor) }}" data-aos-anchor-placement="top-bottom">
                            <div class="shrink-0 w-16 h-16 rounded-full border-2 bg-primary flex items-center justify-center">
                                <div class="w-8 h-8 [&>svg]:w-full [&>svg]:h-full [&>svg]:text-slate-100">
                                    {{ ux_icon(item.icon) }}
                                </div>
                            </div>
                            <div>
                                <h3 class="font-bold text-xl text-primary mb-1">{{ item.title }}</h3>
                                <p class="text-primary/70">{{ item.description }}</p>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="h-full hidden lg:flex items-end justify-center">
                <img src="img/why.png" alt="" class="w-auto h-[60vh] object-cover" loading="lazy">
            </div>
        </div>
    </section>

    <section id="activities" class="bg-primary bg-linear-to-bl from-primary to-primary-darkest grid items-center py-32">
        <div class="container mx-auto px-6">
            <div class="mb-12 md:mb-32 space-y-3">
                <h2 class="{{ titleClass }} text-slate-100" data-aos="fade-up" data-aos-duration="{{ animationDuration }}">{{ sectors.title }}</h2>
                <p class="{{ subtitleClass }} text-slate-200" data-aos="fade-in" data-aos-delay="{{ animationDelay }}" data-aos-duration="{{ animationDuration }}">{{ sectors.subtitle }}</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                {% for item in sectors.items %}
                    <div class="bg-slate-100 flex items-center rounded overflow-hidden" data-aos="fade-in" data-aos-delay="{{ loop.index * (animationDelay / animationFactor) }}" data-aos-anchor-placement="top-bottom">
                        <div class="h-full bg-slate-200 p-6 md:p-12 flex items-center justify-center">
                            <div class="size-8 md:size-12 [&>svg]:w-full [&>svg]:h-full [&>svg]:text-primary">
                                {{ ux_icon(item.icon) }}
                            </div>
                        </div>
                        <div class="p-4 space-y-2">
                            <h3 class="text-primary/80 font-bold text-xl">{{ item.label }}</h3>
                            <p class="text-slate-600">{{ item.description }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section id="process" class="bg-slate-100 line-pattern flex items-center py-32">
        <div class="container mx-auto px-6">
            <div class="mb-16 space-y-3">
                <h2 class="{{ titleClass }} text-primary" data-aos="fade-up" data-aos-duration="{{ animationDuration }}">{{ process.title }}</h2>
                <p class="{{ subtitleClass }} text-primary/80" data-aos="fade-in" data-aos-delay="{{ animationDelay }}" data-aos-duration="{{ animationDuration }}">{{ process.subtitle }}</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                {% for step in process.steps %}
                    <div class="bg-white rounded-lg overflow-hidden border border-slate-200 shadow-sm" data-aos="fade-in" data-aos-delay="{{ loop.index * animationDelay / animationFactor }}" data-aos-anchor-placement="top-bottom">
                        <img src="{{ asset(step.image) }}" alt="{{ step.title }}" class="w-full h-64 object-cover" loading="lazy">
                        <div class="p-4 space-y-3">
                            <h3 class="font-bold text-xl text-primary">{{ step.title }}</h3>
                            <p class="text-primary/70">{{ step.description }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section id="contact" class="flex items-center justify-center px-6 grid-pattern py-32"
             x-data="{ formHasErrors: {{ (not contactForm.vars.valid and contactForm.vars.submitted) ? 'true' : 'false' }} }"
             x-init="if(formHasErrors) $el.scrollIntoView({ behavior: 'smooth', block: 'start' })">
        <div class="w-full max-w-4xl">
            <div class="mb-8 text-center space-y-2">
                <h2 class="text-4xl md:text-5xl font-bold text-primary" data-aos="fade-up" data-aos-duration="{{ animationDuration }}">Parlons de votre projet</h2>
                <p class="text-lg text-primary/80" data-aos="fade-in" data-aos-delay="{{ animationDelay }}" data-aos-duration="{{ animationDuration }}">Planifiez votre rendez-vous ou posez vos questions !</p>
            </div>
            <div class="bg-white shadow-xs border border-slate-200 rounded p-8 md:p-12" data-aos="fade-in" data-aos-delay="{{ animationDelay }}" data-aos-duration="{{ animationDuration }}">
                {{ form_start(contactForm, {'attr': {'class': 'space-y-6'}}) }}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            {{ form_row(contactForm.firstName) }}
                        </div>
                        <div>
                            {{ form_row(contactForm.lastName) }}
                        </div>
                    </div>
                    {{ form_row(contactForm.email) }}
                    {{ form_row(contactForm.phone) }}
                    {{ form_row(contactForm.message) }}
                    {{ form_row(contactForm.acceptTerms) }}
                    <div class="text-end mt-16 mb-0">
                        <button type="submit" class="bg-primary ms-auto hover:bg-primary-lighter transition-colors text-white px-4 py-2 hover:cursor-pointer rounded flex items-center gap-2">
                            {{ux_icon('lucide:send')}}
                            Envoyer
                        </button>
                    </div>
                {{ form_end(contactForm) }}
            </div>
        </div>
    </section>
{% endblock %}
